================================================================================
SMART KANBAN - CHANGELOG
Date: 2026-01-18
================================================================================

VERSION 0.3.5 - Collapsible & Searchable Checklists + Worker Infrastructure
--------------------------------------------------------------------------------

[NEW] Collapsible Checklists
- Each checklist section can now be collapsed/expanded
- Click the checklist header to toggle visibility
- Arrow icon rotates to indicate expand/collapse state
- Mini progress bar visible even when collapsed
- "Expand All" / "Collapse All" button to toggle all checklists at once

[NEW] Searchable Checklists
- Search input field at the top of checklists section
- Filter items across all checklists in real-time as you type
- Clear button (X) to reset search
- Search match highlighting in yellow
- Shows "X of Y items" count when filtering
- Checklists with no matching items are hidden during search

[NEW] Auto-Complete Card on Full Checklist Completion
- Cards automatically marked as "done" when all checklist items are checked
- Works during Trello import (pre-completed checklists get marked done)
- Works when checking the final item interactively
- Enables tracking when new content is added (e.g., new season released)

[NEW] New Season Detection & Auto-Add
- Automatically detects when new seasons are available via TMDb API
- Compares API season count with checklist items (Season X pattern)
- Shows amber alert banner "New Season Available!" in Your Progress section
- "Add to List" button adds missing seasons to checklist with IMDb links
- Card progress becomes incomplete, prompting user to watch new content

[NEW] Dynamic Card Highlighting for New Content
- Cards with hasNewContent flag get amber/gold background and border
- Animated "NEW" badge pulses on card title
- Cards with new content auto-sort to TOP of their column
- Opening a card with new seasons auto-sets the flag
- Adding new seasons clears the flag and unchecks the card

[NEW] Background Content Scanner
- Automatically scans ALL TV series cards when board loads
- No need to open each card - scanning happens in background
- Compares checklist seasons with TMDb API data
- Shows progress indicator in header ("Scanning 2/4")
- Rate-limited to 4 requests/second (250ms between requests)
- Uses useNewContentScanner hook for clean integration

[NEW] Upcoming Season Detection
- Detects ANNOUNCED but not-yet-released seasons via TMDb next_episode_to_air
- Cards show "UPCOMING" badge (amber, pulsing) for future content
- Displays upcoming air date below title (e.g., "S10 â€¢ Feb 15, 2026")
- Works even before all episodes are added to TMDb database
- Example: If Scrubs S10 announced for Feb, it's flagged immediately

[NEW] Show Status Indicators on Cards
- "Returning" badge (blue) for ongoing shows (may get new seasons)
- "Ended" badge (gray) for concluded shows
- Status auto-updated during background scan from TMDb
- Helps know which shows to expect new content from

[NEW] Manual Refresh Button
- "Refresh" button appears in board header when not scanning
- Click to rescan all cards on demand
- Useful after a new season is announced

[NEW] Checklists Collapsed by Default
- Checklists now initialize collapsed in task detail modal
- Shows mini progress bar when collapsed
- Reduces visual clutter when opening cards

[NEW] Worker Infrastructure (Background Processing)
- TaskCoordinator: Orchestrates background task execution
- WorkerPool: Manages 2-4 Web Workers with auto-scaling
- TaskQueue: Priority queue with high/normal/low levels
- RateLimiter: Per-API rate limiting (TMDb, OMDb, Jikan, RAWG, OpenLibrary)
- MessageBus: Pub/sub messaging between workers and main thread
- useBackgroundEnrichment hook: React integration for background processing

[NEW] AgentOrchestrator Background Mode
- enableBackgroundMode() / disableBackgroundMode() methods
- submitForBackground() - Submit cards for async processing
- waitForBackground() - Await task completion with Promise
- onBackgroundComplete() - Subscribe to completion events
- getBackgroundStats() - Get queue and pool statistics

[NEW] CLAUDE.md Configuration
- Post-implementation steps documented
- Type check and build verification instructions
- Documentation update guidelines
- Commit message conventions
- Project structure overview

[ADDED TO TODO] Worker Traffic Optimization (High Priority)
- Replace polling-based processing with event-driven approach
- Optimize TaskQueue with heap/priority queue data structure
- Integrate RateLimiter with task dispatch
- Fix memory leak in callback maps
- Add backpressure mechanism
- Add periodic cleanup interval for completed tasks

--------------------------------------------------------------------------------

FILES MODIFIED:
- src/App.tsx (auto-complete card when all checklist items done)
- src/components/TaskDetailModal.tsx (collapsible + searchable checklists, new season detection)
- src/engine/agents/AgentOrchestrator.ts (background mode support)
- src/engine/index.ts (new exports)
- src/hooks/index.ts (new exports)
- TODO.md (added optimization tasks, marked checklists complete)
- CHANGELOG.md (updated)

FILES ADDED:
- CLAUDE.md (Claude Code instructions)
- src/changelogs/changelog-2026-01-18.txt (this file)
- src/engine/workers/coordinator/TaskCoordinator.ts
- src/engine/workers/coordinator/TaskQueue.ts
- src/engine/workers/coordinator/RateLimiter.ts
- src/engine/workers/pool/WorkerPool.ts
- src/engine/workers/pool/AgentWorker.ts
- src/engine/workers/pool/agentWorker.worker.ts
- src/engine/workers/messaging/MessageBus.ts
- src/engine/workers/messaging/types.ts
- src/engine/workers/conflict/ConflictResolver.ts
- src/engine/workers/validation/ValidationPipeline.ts
- src/engine/workers/index.ts
- src/hooks/useBackgroundEnrichment.ts
- src/hooks/useNewContentScanner.ts (background scanning for new seasons)
- src/components/WorkerStatus.tsx

================================================================================
